<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3: A simple scatterplot with SVG</title>
		<script type="text/javascript" src="../d3/d3.v3.js"></script>
		<style type="text/css">
			/* No style rules here yet */		
		</style>
	</head>
	<body>
		<script type="text/javascript">

			var dataset = [
				[5, 20],
				[480, 90],
				[250, 50],
				[100, 33],
				[330, 95],
				[410, 12],
				[475, 44],
				[25, 67],
				[85, 21],
				[220, 88],
				[600, 150]
			];

			var margin = { top: 20, bottom: 20, left: 20, right: 20 };

			//Width and height
			var w = 500 - margin.left - margin.right;
			var h = 300 - margin.top - margin.bottom;
	
			//Create SVG element
			var svg = d3.select('body').append('svg')
					.attr('width', w + margin.left + margin.right)
					.attr('height', h + margin.bottom + margin.top);
				.append('g')
					.attr('transform',
							'translate(' + margin.left + ',' + margin.top + ')');

			// Data scale
			var xscale = d3.scale.linear()
				.domain([0, d3.max(dataset, function (d) { return d[0]; })])
				.range([0, width]);

			var yscale = d3.scale.linear()
				.domain([0, d3.max(dataset, function (d) { return d[1]; })])
				.range([h, 0]);

			var rscale = d3.scale.linear()
				.domain([0, d3.max(dataset, function (d) { return d[1]; })])
				.range([2, 5])
				.nice();

			// Data points
			svg.selectAll('circle')
				.data(dataset)
			 	.enter()
			 	.append('circle')
			 	.attr('cx', function (d) {
						return xscale(d[0]);
						})
			 	.attr('cy', function (d) {
						return yscale(d[1]);
						})
				.attr('r', function (d) {
						return Math.ceil(rscale(d[1]));
						});

			// Labels
			var fontsize = 11;
			svg.selectAll('text')
				.data(dataset)
				.enter()
				.append('text')
				.text(function (d) { return d[0] + ',' +  d[1]; })
				.attr('x', function (d) {
						return xscale(d[0]);
						})
				.attr('y', function (d) {
						return yscale(d[1]);
						})
				.attr('fill', 'red')
				.attr('font-family', 'sans-serif')
				.attr('font-size', fontsize)
				.attr('text-anchor', 'center');
			
		</script>
	</body>
</html>
